# Private Cloud

## Monitoring

Once the private cloud is created, a GCE VM instance will be created where the observability agent is installed to retrieve VMWare metrics and logs into GCP. 
The monitoring setup approach will include:
- enable monitoring API on the project
- creating a new GCE VM instance
- creating a new service account with monitoring & logging permissions
- installing the GCVE observability agent in the GCE VM
- ability to create new GCVE dashboards

Reference guide: [GCVE - Setting up Cloud Monitoring with a standalone agent](https://cloud.google.com/vmware-engine/docs/environment/howto-cloud-monitoring-standalone)

## Prerequisites

 * Private Cloud is already deployed and accessible

## Instructions

To deploy this stage from a local UNIX shell, follow the steps:
 * Rename (or copy) the file `terraform.tfvars.example` to `terraform.tfvars` and fill in suitable variables for your environment.
 * Supply variables related to your GCVE vSphere environment:
   * `export TF_VAR_vsphere_server=vcsa-123456.abcdef01.asia-southeast1.gve.goog`
   * `export TF_VAR_vsphere_user=CloudOwner@gve.local`
   * `export TF_VAR_vsphere_password=.......`
 * Initialize Terraform: `terraform init`
 * Validate the resources created by Terraform: `terraform plan`
 * Apply Terraform configurations: `terraform apply`

 It is important to note that variables for vSphere connection will show up in clear text in Terraform state. Review guidance and best practices on [protecting sensitive parameters in Terraform state](https://learn.hashicorp.com/tutorials/terraform/sensitive-variables) to ensure Terraform state is secured appropriately in Production environments.
