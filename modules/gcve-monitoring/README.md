# GCVE Monitoring Module
This Terraform module creates a GCE VM where a monitoring agent will be installed to retrieve GCVE metrics.
Additionally, example monitoring dashboards can be installed.  
Reference: [GCVE - Setting up Cloud Monitoring with a standalone agent](https://cloud.google.com/vmware-engine/docs/environment/howto-cloud-monitoring-standalone)

# Execution environment
VMware Engine integrates with Cloud Logging by forwarding syslog messages from vCenter and NSX-T to the standalone agent.  
Make sure to follow the steps required to update GCVE configuration by using the document [Configure a private cloud for syslog forwarding](https://cloud.google.com/vmware-engine/docs/environment/howto-cloud-monitoring-standalone#configure-private-cloud-syslog).

## Requirements

| Name | Version |
|------|---------|
| terraform | >= 1.0.0 |

## Providers

| Name | Version |
|------|---------|
| google | 4.27.0 |
| template | 2.2.0 |

## Resources

| Name | Type |
|------|------|
| [google_compute_instance.vm_monitoring_gcve](https://registry.terraform.io/providers/hashicorp/google/latest/docs/resources/compute_instance) | resource |
| [google_monitoring_dashboard.gcve_mon_dashboards](https://registry.terraform.io/providers/hashicorp/google/latest/docs/resources/monitoring_dashboard) | resource |
| [google_project_iam_member.gcve_monitoring_permissions](https://registry.terraform.io/providers/hashicorp/google/latest/docs/resources/project_iam_member) | resource |
| [google_project_service.enable_destination_api](https://registry.terraform.io/providers/hashicorp/google/latest/docs/resources/project_service) | resource |
| [google_service_account.sa_gcve_monitoring](https://registry.terraform.io/providers/hashicorp/google/latest/docs/resources/service_account) | resource |
| [template_file.gcve_monitoring_agent_linux](https://registry.terraform.io/providers/hashicorp/template/latest/docs/data-sources/file) | data source |

## Inputs

| Name | Description | Type | Default | Required |
|------|-------------|------|---------|:--------:|
| create\_dashboards | Define if sample GCVE monitoring dashboards should be installed | `bool` | `true` | no |
| gcve\_region | Region where the Private Cloud is deployed | `string` | n/a | yes |
| project | The GCP project that will be used for GCVE monitoring | `string` | n/a | yes |
| sa\_gcve\_monitoring | Service account for GCVE monitoring agent | `string` | n/a | yes |
| subnetwork | Subnetwork where the VM will be deployed to | `string` | n/a | yes |
| vm\_mon\_name | GCE VM name where GCVE monitoring agent will run | `string` | n/a | yes |
| vm\_mon\_type | GCE VM machine type | `string` | n/a | yes |
| vm\_mon\_zone | GCP zone where GCE VM will be deployed | `string` | n/a | yes |
| vsphere\_password | The password for the vCenter admin user | `string` | n/a | yes |
| vsphere\_server | The FQDN of the vSphere vCenter server | `string` | n/a | yes |
| vsphere\_user | The username used to connect to the vCenter server. Must be an admin user | `string` | n/a | yes |

## Outputs

No outputs.